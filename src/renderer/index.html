<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Vash Reader</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app">
        <header class="header">
            <h1 id="homeTitle" class="clickable-title">Vash Reader</h1>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search manga...">
                <button id="searchBtn">Search</button>
                <button id="advancedSearchBtn" class="advanced-search-btn">üîç Advanced</button>
            </div>
            <div class="header-buttons">
                <button id="followsBtn" class="header-btn">Following</button>
                <button id="notificationsBtn" class="header-btn notification-btn">
                    üîî
                    <span id="notificationBadge" class="notification-badge hidden">0</span>
                </button>
                <button id="filterToggleBtn" class="filter-toggle enabled" title="Toggle content filter">üîû
                    Filter</button>
            </div>
        </header>

        <main class="main">
            <div id="homePage" class="home-page">
                <!-- Last Read Section -->
                <section class="home-section">
                    <div class="section-header">
                        <h2>Last Read</h2>
                        <div class="section-nav">
                            <button id="lastReadPrev" class="nav-btn">‚Üê</button>
                            <button id="lastReadNext" class="nav-btn">‚Üí</button>
                        </div>
                    </div>
                    <div id="lastReadGrid" class="horizontal-grid"></div>
                </section>

                <!-- Popular Ongoing Section -->
                <section class="home-section">
                    <div class="section-header">
                        <h2>Popular Ongoing</h2>
                        <div class="section-nav">
                            <button id="popularPrev" class="nav-btn">‚Üê</button>
                            <button id="popularNext" class="nav-btn">‚Üí</button>
                        </div>
                    </div>
                    <div id="popularGrid" class="horizontal-grid"></div>
                </section>

                <!-- Trending Section -->
                <section class="home-section">
                    <div class="section-header">
                        <h2>Most Recent Popular</h2>
                        <div class="section-nav">
                            <button id="trendingPrev" class="nav-btn">‚Üê</button>
                            <button id="trendingNext" class="nav-btn">‚Üí</button>
                        </div>
                    </div>
                    <div id="trendingGrid" class="horizontal-grid"></div>
                </section>

                <!-- New Follow Section -->
                <section class="home-section">
                    <div class="section-header">
                        <h2>Most Followed New Comics</h2>
                        <div class="section-nav">
                            <button id="newFollowPrev" class="nav-btn">‚Üê</button>
                            <button id="newFollowNext" class="nav-btn">‚Üí</button>
                        </div>
                    </div>
                    <div id="newFollowGrid" class="horizontal-grid"></div>
                </section>

                <!-- Recent Updates Section -->
                <section class="home-section">
                    <h2>Recent Updates</h2>
                    <div id="recentGrid" class="recent-grid"></div>
                </section>
            </div>

            <div id="searchResults" class="search-results hidden">
                <h2>Search Results</h2>
                <div id="resultsGrid" class="results-grid"></div>
            </div>

            <div id="sourceSelection" class="source-selection hidden">
                <button id="backToHome" class="back-btn">‚Üê Back to Home</button>
                <h2 id="sourceSelectionTitle"></h2>
                <p class="source-selection-subtitle">Choose a source to read from:</p>
                <div id="sourcesGrid" class="sources-grid"></div>
            </div>

            <div id="chapterList" class="chapter-list hidden">
                <button id="backToSourceSelection" class="back-btn">‚Üê Back to Sources</button>
                <h2 id="mangaTitle"></h2>
                <div id="chaptersGrid" class="chapters-grid"></div>
            </div>

            <div id="followsPage" class="follows-page hidden">
                <button id="backToHomeFromFollows" class="back-btn">‚Üê Back to Home</button>
                <div class="follows-header">
                    <h2>Following</h2>
                    <div class="follows-actions">
                        <button id="checkUpdatesBtn" class="import-export-btn check-updates-btn">üîÑ Check for
                            Updates</button>
                        <button id="fetchCoversBtn" class="import-export-btn fetch-covers-btn">üñºÔ∏è Fetch All
                            Covers</button>
                        <button id="updateReadingProgressBtn" class="import-export-btn">üìñ Add Continue Buttons</button>
                        <button id="importFollowsBtn" class="import-export-btn">üì• Import CSV</button>
                        <button id="exportFollowsBtn" class="import-export-btn">üì§ Export CSV</button>
                    </div>
                </div>

                <!-- Search and Filter Controls -->
                <div class="follows-controls">
                    <div class="search-filter-container">
                        <input type="text" id="followsSearchInput" placeholder="Search manga..." class="follows-search">
                        <select id="statusFilter" class="status-filter">
                            <option value="">All Statuses</option>
                            <option value="Reading">Reading</option>
                            <option value="Completed">Completed</option>
                            <option value="On-Hold">On-Hold</option>
                            <option value="Dropped">Dropped</option>
                            <option value="Plan to Read">Plan to Read</option>
                        </select>
                        <button id="clearFiltersBtn" class="clear-filters-btn">Clear</button>
                    </div>
                </div>

                <div id="followsGrid" class="follows-grid"></div>

                <!-- Hidden file input for CSV import -->
                <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
            </div>

            <div id="notificationsPage" class="notifications-page hidden">
                <button id="backToHomeFromNotifications" class="back-btn">‚Üê Back to Home</button>
                <div class="notifications-header">
                    <h2>Notifications</h2>
                    <div class="notifications-actions">
                        <button id="markAllReadBtn" class="mark-all-read-btn">Mark All Read</button>
                        <button id="clearAllNotificationsBtn" class="clear-all-notifications-btn">Clear All</button>
                    </div>
                </div>
                <div id="notificationsList" class="notifications-list"></div>
            </div>

            <div id="reader" class="reader hidden">
                <div class="reader-controls reader-controls-top">
                    <span id="pageInfo"></span>
                    <div class="chapter-navigation">
                        <button id="prevChapter">‚Üê Previous Chapter</button>
                        <select id="chapterSelect"></select>
                        <button id="nextChapter">Next Chapter ‚Üí</button>
                    </div>
                </div>
                <div id="pageContainer" class="page-container"></div>
                <div class="reader-controls reader-controls-bottom">
                    <span id="pageInfoBottom"></span>
                    <div class="chapter-navigation">
                        <button id="prevChapterBottom">‚Üê Previous Chapter</button>
                        <select id="chapterSelectBottom"></select>
                        <button id="nextChapterBottom">Next Chapter ‚Üí</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation Bar -->
        <footer class="bottom-nav">
            <div class="bottom-nav-content">
                <h1 id="bottomHomeTitle" class="clickable-title">Vash Reader</h1>
                <div class="bottom-nav-buttons">
                    <button id="bottomFollowsBtn" class="header-btn">Following</button>
                    <button id="bottomNotificationsBtn" class="header-btn notification-btn">
                        üîî
                        <span id="bottomNotificationBadge" class="notification-badge hidden">0</span>
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Advanced Search Modal -->
    <div id="advancedSearchModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Advanced Search</h2>
                <button id="closeAdvancedSearch" class="close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <form id="advancedSearchForm">
                    <!-- Basic Search -->
                    <div class="form-group">
                        <label for="advancedQuery">Title Search:</label>
                        <input type="text" id="advancedQuery" placeholder="Enter manga title...">
                    </div>

                    <!-- Type/Format -->
                    <div class="form-group">
                        <label>Type:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="type" value="manga"> Manga</label>
                            <label><input type="checkbox" name="type" value="manhwa"> Manhwa</label>
                            <label><input type="checkbox" name="type" value="manhua"> Manhua</label>
                        </div>
                    </div>

                    <!-- Demographics -->
                    <div class="form-group">
                        <label>Demographics:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="demographic" value="1"> Shounen</label>
                            <label><input type="checkbox" name="demographic" value="2"> Shoujo</label>
                            <label><input type="checkbox" name="demographic" value="3"> Seinen</label>
                            <label><input type="checkbox" name="demographic" value="4"> Josei</label>
                        </div>
                    </div>

                    <!-- Status -->
                    <div class="form-group">
                        <label for="status">Status:</label>
                        <select id="status">
                            <option value="">Any</option>
                            <option value="1">Ongoing</option>
                            <option value="2">Completed</option>
                            <option value="3">Cancelled</option>
                            <option value="4">Hiatus</option>
                        </select>
                    </div>

                    <!-- Content Rating -->
                    <div class="form-group">
                        <label>Content Rating:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="contentRating" value="safe"> Safe</label>
                            <label><input type="checkbox" name="contentRating" value="suggestive"> Suggestive</label>
                            <label><input type="checkbox" name="contentRating" value="erotica"> Erotica</label>
                        </div>
                    </div>

                    <!-- Country -->
                    <div class="form-group">
                        <label>Country:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="country" value="jp"> Japan</label>
                            <label><input type="checkbox" name="country" value="kr"> Korea</label>
                            <label><input type="checkbox" name="country" value="cn"> China</label>
                        </div>
                    </div>

                    <!-- Year Range -->
                    <div class="form-group">
                        <label>Year Range:</label>
                        <div class="year-range">
                            <input type="number" id="fromYear" placeholder="From" min="1900" max="2030">
                            <span>to</span>
                            <input type="number" id="toYear" placeholder="To" min="1900" max="2030">
                        </div>
                    </div>

                    <!-- Minimum Chapters -->
                    <div class="form-group">
                        <label for="minChapters">Minimum Chapters:</label>
                        <input type="number" id="minChapters" min="0" placeholder="0">
                    </div>

                    <!-- Genres -->
                    <div class="form-group">
                        <label>Genres (Include):</label>
                        <input type="text" id="genreSearch" class="genre-search" placeholder="üîç Search genres...">
                        <div id="genresContainer" class="genres-container">
                            <div class="loading">Loading genres...</div>
                        </div>
                    </div>

                    <!-- Excluded Genres -->
                    <div class="form-group">
                        <label>Exclude Genres:</label>
                        <input type="text" id="excludedGenreSearch" class="genre-search"
                            placeholder="üîç Search genres to exclude...">
                        <div id="excludedGenresContainer" class="genres-container">
                            <div class="loading">Loading genres...</div>
                        </div>
                    </div>

                    <!-- Sort -->
                    <div class="form-group">
                        <label for="sort">Sort by:</label>
                        <select id="sort">
                            <option value="">Relevance</option>
                            <option value="rating">Rating</option>
                            <option value="follow">Most Followed</option>
                            <option value="view">Most Viewed</option>
                            <option value="created_at">Newest</option>
                            <option value="uploaded">Recently Updated</option>
                        </select>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-actions">
                        <button type="button" id="clearAdvancedSearch">Clear All</button>
                        <button type="submit" id="submitAdvancedSearch">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../utils/content-filter.js"></script>
    <script src="renderer.js"></script>
</body>

</html>